# %%
# ä½¿ç”¨å¥—ä»¶è§£
from scipy import optimize
import scipy
import numpy as np

# paperçš„å•é¡Œ:
# Max Z =60X1 + 45X2 + 45X3 + 42X4 +42X5
# s.t (1) ğ‘‹1 +ğ‘‹2 +ğ‘‹3 +ğ‘‹4 +ğ‘‹5 â‰¤61,250,000
# (2) ğ‘‹2 + ğ‘‹3 â‰¤ 12,250,000
# (3) ğ‘‹1 â‰¤ 18,375,000
# (4) ğ‘‹2 â‰¤ 18,375,000
# (5) ğ‘‹3 â‰¤ 18,375,000
# (6) ğ‘‹4 â‰¤ 18,375,000
# (7) ğ‘‹5 â‰¤ 18,375,000
# (8)71ğ‘‹1 + 35ğ‘‹2 + 41ğ‘‹3 + 57ğ‘‹4 + 54ğ‘‹5 â‰¥ 5,500,000
# (9) 69ğ‘‹1 + 20ğ‘‹2 + 36ğ‘‹3 + 42ğ‘‹4 + 41ğ‘‹5 â‰¥ 4,800,000
# (10) 56ğ‘‹1 + 12ğ‘‹2 + 12ğ‘‹3 + 42ğ‘‹4 + 39ğ‘‹5 â‰¥ 4,500,000

c = np.array([-60, -45, -45, -42, -42])
A_ub = np.array([[1,1,1,1,1],
                [0,1,1,0,0],
                [-71,-35,-41,-57,-54],
                [-69,-20,-36,-42,-41],
                [-56,-12,-12,-42,-39]])

B_ub = np.array([[61250000],[12250000],[-5500000],[-4800000],[-4500000]])

res = scipy.optimize.linprog(c, A_ub, B_ub,
                             bounds = [(0,18375000),(0,18375000),(0,18375000),(0,18375000),(0,18375000)],
                             method= "revised simplex")

print(res)

# %%
# ä¸ç”¨å¥—ä»¶è§£
# ç·´ç¿’æ‰‹åˆ»simplex method
import numpy as np
import pandas as pd

np.seterr(divide='ignore',invalid='ignore')

Ab = np.array([[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,61250000],
               [0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,12250000],
               [1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,18375000],
               [0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,18375000],
               [0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,18375000],
               [0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,18375000],
               [0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,18375000],
               [71,35,41,57,54,0,0,0,0,0,0,0,-1,1,0,0,0,0,5500000],
               [69,20,36,42,41,0,0,0,0,0,0,0,0,0,-1,1,0,0,4800000],
               [56,12,12,42,39,0,0,0,0,0,0,0,0,0,0,0,-1,0,4500000],
               [-60,-45,-45,-42,-42,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],dtype="float32")

n1,m1 = np.shape(Ab)
n = n1-1
m = m1-1

k = 0
while np.any(Ab[n,:-1]<0):
    j = np.argmin(Ab[n,:-1])
    #pivotrow
    minval = np.inf
    for i in range(n):
        val = Ab[i,m]/Ab[i,j]
        if (val>0) & (val<minval):
            minval = val
            pivotrow = i
    #print(pivotrow)

    #é«˜æ–¯æ¶ˆå»æ³•
    Ab[pivotrow,:] = Ab[pivotrow,:]/Ab[pivotrow,j]
    #print(Ab)
    for i in range(n+1):
        if (i != pivotrow) :
            multipy = Ab[i,j]/Ab[pivotrow,j]
            Ab[i,:] = Ab[i,:] - (Ab[pivotrow,:] * multipy)
    Ab = np.around(Ab,4)
    k = k+1

    #Ab = pd.DataFrame(Ab)
    #print("ç¬¬" + str(k) + "æ¬¡ï¼š", Ab)
    #Ab = Ab.values

Ab = pd.DataFrame(Ab)
print(Ab)